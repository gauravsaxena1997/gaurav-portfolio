'use client';

import { memo, useRef, useEffect } from 'react';
import { gsap } from 'gsap';
import type { CharacterState } from './hooks/useCharacterTracking';
import styles from './InteractiveCharacter.module.css';

interface InteractiveCharacterProps {
    characterState: CharacterState;
    className?: string;
}

/**
 * Interactive Character (New Version based on SVG 3)
 * Professional/Creative Look
 */
export const InteractiveCharacterNew = memo(function InteractiveCharacterNew({
    characterState,
    className,
}: InteractiveCharacterProps) {
    const headRef = useRef<SVGGElement>(null);
    const leftPupilRef = useRef<SVGGElement>(null);
    const rightPupilRef = useRef<SVGGElement>(null);
    const mouthRef = useRef<SVGGElement>(null);

    // Animation Logic
    useEffect(() => {
        // 1. Head Tilt (Rotate entire head group)
        // Map -50..50 tilt to -5..5 degrees
        const tilt = characterState.headTiltX * 0.1;
        if (headRef.current) {
            gsap.to(headRef.current, {
                rotation: tilt,
                transformOrigin: '50% 80%', // Pivot near neck
                duration: 0.5,
                ease: 'power2.out'
            });
        }

        // 2. Eye Tracking (Translate Iris Groups)
        // Map range roughly -10..10 per eye
        const eyeX = characterState.eyeX * 8;
        const eyeY = characterState.eyeY * 5;

        if (leftPupilRef.current) {
            gsap.to(leftPupilRef.current, { x: eyeX, y: eyeY, duration: 0.2, ease: 'power1.out' });
        }
        if (rightPupilRef.current) {
            gsap.to(rightPupilRef.current, { x: eyeX, y: eyeY, duration: 0.2, ease: 'power1.out' });
        }

        // 3. Mouth Expression (Scale Y based on expression)
        // Expression 0 (Close) -> 100 (Full Smile)
        // We want neutral (closed) at 0, Open at 100.
        // SVG default is Open. So:
        // 0 -> scaleY: 0.1, opacity: 0? No, just scaleY 0.2 (closed lips)
        // 100 -> scaleY: 1
        const smileScale = 0.2 + (characterState.expression / 100) * 0.8;

        if (mouthRef.current) {
            gsap.to(mouthRef.current, {
                scaleY: smileScale,
                transformOrigin: '50% 50%', // Center of mouth
                duration: 0.4,
                ease: 'back.out(1.2)'
            });
        }

    }, [characterState]);

    return (
        <div className={`${styles.container} ${className || ''}`}>
            <svg
                viewBox="0 0 418.438 510.492"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                className={styles.svg}
                aria-label="Interactive Character"
            >
                <g>
                    {/* === BODY / SHOULDERS (Static) === */}
                    <g id="body">
                        {/* SVG 3 Body Paths */}
                        <path fill="#B66D4A" d="M119.6 362.9c1 2 2.3 4 3.6 5.8 5.6 7.8 12.5 14.6 20 20.6 13.6 11 29.9 18.4 47 21.7 8.6 1.6 17.5 2.4 26.2 2 8.4-.5 16.7-2.2 24.6-5 8-3 15.6-7 22.5-12 6.9-5 12.8-11 18.4-17.4 5.8-6.9 11.4-14 16.2-21.6.3-.5.6-1 .9-1.5-11.5-6-40-15.3-46-28-6-13-1-81.5-1-81.5h-83.4c0 0 5.6 74-3.7 83.4-11.3 11.2-38.7 23.5-47.6 28 1.5 2.1 2.3 4 3.2 5.8z" />
                        <path opacity="0.64" fill="#EFB291" d="M170 300.2c2 1.7 3.9 3.5 5.8 5 3.4 2.8 7.3 5 11.3 6.7 8 3.6 16.5 5.7 25.3 5.8 7.2.1 14.5-.9 21.5-2.9 5.7-1.6 11.2-3.9 16.3-6.8-1-24.8 1.8-62.3 1.8-62.3h-83.4c1.5 6.9 3.7 37 1.4 54.5z" />
                        <path fill="#4D4D4F" d="M412.2 502.8c-3-15.2-16-98-25.5-111-10-13.7-89.7-41.3-121.7-56.6.4 1 .7 2.3 1 3.4 1.1 5 1.4 10.3.9 15.5-.5 5.2-1.6 10.4-3.5 15.3-1.8 4.7-4.1 9.2-7.1 13.2-2.6 3.5-5.8 6.4-9.3 9-3.7 2.6-7.7 4.7-11.9 6.3-4.4 1.7-8.9 3-13.6 3.7-2.7.4-5.4.7-8.2.9v-.2c-1.4.1-2.9.2-4.3.3-.3 0-.6 0-.8 0-.3 0-.6 0-.8 0-1.4 0-2.9-.1-4.3-.3v.2c-2.7-.1-5.5-.4-8.2-.9-4.6-.8-9.2-2-13.6-3.7-4.2-1.6-8.2-3.7-11.9-6.3-3.5-2.5-6.7-5.5-9.3-9-3-4-5.4-8.5-7.1-13.2-1.8-4.9-3-10-3.5-15.3-.5-5.2-.2-10.4.9-15.5.3-1.2.6-2.3 1-3.4-32 15.3-106 40.4-116 54-8.9 12-24 90-28.9 113.4H412.2z" />
                        <path fill="#323234" d="M257.3 330.3c.6 7.8 1.2 32.2-12.4 47.5-3.7 4.2-8.4 7.5-13.7 9.7-6.4 2.6-14 3.9-22.8 3.8-16.6-.2-29-5.2-37-14.8-12.4-14.7-11.8-35.3-11.1-44 0 0 .1-1 .1-1-5.8 2.3-11.6 4.5-17.2 7 0 13.3 2.2 33 15.2 48.6 11.3 13.6 28 20.6 50 21 .5 0 .9 0 1.4 0 20.6 0 36.8-6.5 48-19.3 13.9-15.8 16.6-36 16.8-49.5-2.6.7-14.3-4.3-17.3-8z" />
                    </g>

                    {/* === HEAD GROUP (Rotates) === */}
                    <g ref={headRef} id="head-group" transform-origin="200 300">

                        {/* Face Shape */}
                        <path fill="#B56D51" d="M321 193c-3-9.8-14-14.6-24-10.9-5.8 2.1-10 7.5-12.4 12.7-1.4 3-2.2 6.4-2.6 9.7-2 5.9-3 12.4-2.6 18.5.3 4.4 1 12.3 5.7 14.7 4.7 2.3 12-1.5 16-3.8 5-3 9-7 12.4-11.5 6.3-8.3 10.9-18.9 7.7-29.2z" />
                        <path opacity="0.39" fill="#A5653F" d="M290 238.6c.6-2.2 1.2-4.4 1.8-6.6 2.2-8.8 4-17.9 4.6-27 .5-7.3.4-14.8-.9-22-5 2.4-8.8 7.3-11 12-1.4 3-2.2 6.4-2.6 9.7-2 5.9-3 12.4-2.6 18.5.3 4.4 1 12.3 5.7 14.7 1.5.3 3.2.4 5 .2z" />
                        <path fill="#B56D51" d="M112.8 222.7c3.3 4.5 7.4 8.6 12.4 11.5 3.9 2.3 11.2 6.1 15.9 3.8 4.8-2.3 5.4-10.3 5.7-14.7.4-6.2-.5-12.6-2.6-18.5-.4-3.3-1.2-6.6-2.6-9.7-2.4-5.2-6.6-10.6-12.4-12.7-10.2-3.8-21 1.1-24 10.9-3.2 10.2 1.4 20.9 7.6 29.4z" />
                        <path opacity="0.39" fill="#A5653F" d="M136 238.6c-.6-2.2-1.2-4.4-1.8-6.6-2.2-8.8-4-17.9-4.6-27-.5-7.3-.4-14.8.9-22 5 2.4 8.8 7.3 11 12 1.4 3 2.2 6.4 2.6 9.7 2 5.9 3 12.4 2.6 18.5-.3 4.4-1 12.3-5.7 14.7-1.5.3-3.2.4-5 .2z" />
                        <path fill="#B56D51" d="M299 158.9c1.6-17.5 2.5-35 1.3-52.5-.8-11.7-3.2-24.3-12-32.4-4-3.7-9-6-14-8-28.5-11.4-63.6-14-93.3-5.7-14.4 4-27.8 11.2-39.7 20-4.7 3.5-9 7.4-12.2 11.9-.6 1.4-1.2 2.9-1.6 4.4-.5 1.9-.6 3.9-.8 5.9-2.1 32 1 64.2 5.8 96 2 13.6 4.7 27 6.8 40.7 2 13.7 4 31.7 15.2 41.2 6.2 5.3 13 9.7 20 14 6.7 4.2 13.2 9 20.4 12.3 9 4.1 19.7 5.4 29.5 2.7 10.3-2.8 18.9-9.5 27.7-15 6.9-4.3 13.8-8.7 20-14 2.7-2.3 5-4.9 6.7-8 1.7-3 2.8-6.2 3.7-9.5 7-25.3 11.4-51.4 14-77.5 1.7-18 2.7-26.8 3.5-35.7z" />

                        {/* Hair */}
                        <path fill="#222326" d="M301.6 102.6c-.4-3-1.3-6-2.3-9-1.8-5.2-4.1-10.1-7-14.8-2.9-4.7-6.4-9.1-10.4-13-3.9-3.7-8.4-6.7-13.4-8.8-5-2-10.4-2.9-15.8-2.7-5.1.2-10.1 1.4-14.6 3.7-4.6 2.3-8.6 5.6-11.8 9.7-3.3 4.2-5.5 9-7.3 14-1 2.7-1.8 5.4-2.3 8.3-.5 2.7-.8 5.5-.5 8.2.1.6.2 1.2.3 1.8-.2.1-.5.4-.1.5.1 0 .2 0 .3 0 .1.4.3.8.4 1.2.3.7 1.5 0 1.2-.5-.1-.3-.2-.6-.3-.9.4-.1.8-.3 1.2-.5 1.2-.5 2.3-1.1 3.4-1.7 1.2-.6 2.4-1 3.7-1.4 1.8-.5 3.5-1 5.3-1.3 3.5-.7 7.1-.7 10.7-.6 3.4.1 6.8.6 10.2 1.4 6.3 1.6 12.4 4.4 18 7.8 5.5 3.3 10.5 7.3 14.9 12 2.2 2.3 4.2 4.8 5.8 7.5 1.6 2.7 2.9 5.5 4.2 8.3.3.7.7 1.5 1 2.2.2.4.9 0 1-.3 1.6-6.8 3.6-13.6 4.2-20.5.5-2.7.5-6.2 0-9.7z" />
                        <path fill="#27282B" d="M343.8 89.3c-2.3-3.1-5.3-5.5-8.5-7.6 1.8.2 3.6.1 5.4-.1 2.7-.3 5.6-1.1 7.7-2.9 1-1 1.7-2.2 1.9-3.6.1-.5-.6-.4-.8-.2-2 1.5-4.4 2.7-7 2.6-2.3 0-4.6-1-6.5-2.2-4.6-3-8.1-7.5-11.4-11.8-1.6-2.1-3.1-4.1-4.8-6.2-1.8-2.2-3.8-4.1-6-5.8-5.8-4.5-13-7.5-20.4-8.3-3.2-.4-6.4-.1-9.6.5-1.4.3-2.8.6-4.2 1.1-.7-6.5-3.6-12.5-7.6-17.5-4.4-5.5-10.1-9.9-16.3-13.2-6.8-3.5-14-5.4-21.6-6.1-17.8-1.6-35.4 2.7-52.1 8.4-8.6 2.9-17 6.3-25.5 9.6-4.1 1.6-8.1 3.2-12.2 4.7-2.1.8-4.3 1.6-6.5 2.1-4.8 1.3-9.8 2.1-14.8 2-4.1-.1-9.2-.9-11.3-5-.5-1-.7-2-.8-3.1 0-.6-.9-.4-1.1 0-2 3.6-1.9 7.7-.1 11.3 1.5 3 3.9 5.4 6.8 7.1-1.8.9-3.7 1.8-5.4 2.7-5.9 3.2-11.5 7.1-16.5 11.6-4.6 4.1-8.7 8.8-12.2 14-3.5 5.2-6.3 10.9-7.8 17-1.5 6-1.8 12.2-.3 18.2.2.8.4 1.5.7 2.3.2.7 1.2.1 1.2-.4.4-4.2 2.1-8.4 4.2-12 2.2-3.8 5-7.2 8.3-10.1.8-.7 1.5-1.3 2.4-1.9-.5 1.1-1 2.3-1.5 3.4-1.5 3.5-3.2 6.8-5 10.1-2 3.6-4.1 7.1-6.4 10.5-1.7 2.6-3.5 5.2-5.6 7.5-2.3 2.6-5.2 4.8-8.6 5.6-.3.1-1 .8-.5 1 7.2 3.7 15.9 3.4 23.2.1.1 2.3.3 4.6.7 6.8 1.4 9.6 5.8 18.5 11.8 26 1.1 1.3 2.2 2.6 3.3 3.8 0 .1 0 .1.1.2 1.9 5.4 4.3 10.6 6.9 15.6 5.2 10.2 11.3 20 16.4 30.3 1.5 3 2.8 6 4.5 8.9 1.8 3.1 3.7 6.1 5.2 9.3.3.6 1.2-.2 1.1-.6-.6-3.1-1.3-6.2-2-9.4-.2-2.3-.4-4.6-.5-6.9-.4-5.3-1.1-10.5-1.2-15.9-.1-5.5.2-11.1.8-16.6.5-4.7 1-9.4 2-14 .8-4 2.1-8 4.1-11.7 2.1-4 5.1-7.5 8.5-10.4 7.1-6 16-9.1 24.1-13.5 4-2.1 8-4.6 11.6-7.5-.9 1.5-1.9 2.9-2.9 4.3-1.5 2-3.3 3.9-4.9 5.8-1.5 1.8-3.1 3.6-4.8 5.3-1.7 1.7-3.7 3.5-6.1 3.9-.4.1-1 .8-.4 1 3.2 1.2 7-.3 9.8-1.8 3.7-1.9 7.1-4.5 10.3-7.2 7.3-6.3 13.3-14.2 17.7-22.8 0-.1.1-.2.1-.2 0 .2-.1.4-.1.6-.9 4.5-2.2 9-4 13.2-1.8 4.1-4.3 7.7-7.2 11.1-2.7 3.1-5.7 6.1-9 8.5-3.5 2.6-7.8 5-12.3 4.8-.5 0-1.1.8-.5 1 5.6 1.7 11.6.5 16.9-1.7 5.5-2.3 10.3-5.9 14.8-9.8 4.5-4 8.5-8.5 11.8-13.5 3.5-5.2 6.3-10.9 8.7-16.7 2.3-5.4 4.4-10.8 6.5-16.3 1.8-4.8 3.7-9.6 6.6-13.9 1.4-2 3-3.9 4.9-5.3 2.2-1.6 4.7-2.7 7.4-3.2 5.3-1.1 10.8.3 15.2 3.3 4.9 3.3 8.2 8.5 10.3 13.9 2.1 5.6 2.7 11.4 2.7 17.3 0 1.5 0 3.1 0 4.6 0 .1 0 .1.1.1-.4.7.6.8 1 .3 1.1-1.8 2.6-3.4 4.1-4.9 1.6-1.4 3.5-2.8 5.7-3.1 2.4-.3 4 1.5 4.7 3.6 1 3.1.4 6.5.3 9.6-.2 4-.5 8-.5 12.1-.1 3.8-.1 7.7 0 11.5.1 6.8.7 14.1 4.2 20.1.3.5.6 1 .9 1.5-.1 1.1-.1 2.1-.2 3.2 0 2.1.1 4.1.1 6.2 0 2.1 0 4.2-.1 6.2-.3 8.3-.9 16.7-1.6 25-.4 4.5-.9 9-1.6 13.5-.1.5.6.4.8.2 1.5-1.2 2.2-3.1 3.4-4.6 1.5-1.9 3-3.8 4.5-5.8 2.9-4 5.2-8.5 7.5-12.8 2.4-4.4 4.8-8.8 7.1-13.2 2.3-4.5 4.4-9.1 6.6-13.6.6-1.2 1.3-2.3 2-3.5 4.4-5.4 8.6-11.1 11.9-17.3 3.2-6.1 5.4-12.9 5-19.9-.2-3.5-1-6.9-2.4-10.1 1.6 1.7 2.6 4 3.5 6.1.6 1.6.8 3.2.8 5 0 1.6-.1 3.2.2 4.7.1.6.9.1 1-.2 3-7.5 5.5-15.9 4-24.2 0-3.3-1.7-7.4-4.2-10.9z" />

                        {/* === GLASSES === */}
                        <path fill="#222326" d="M288.6 168.9c-1.4-2.9-2.9-5.6-5.1-7.5-3.5-3-7.8-4.3-11.9-4.9-4.2-.7-8.4-.7-12.7-.5-5.4.3-10.9.9-16.2 2-4.4.9-8.7 2.1-12.9 3.7.6 2.3 1.4 4.5 2.3 6.5.2.2.4.5.6.7.4.4.9.9 1.4 1.2 2.5.7 5 .8 7.5.7 4.2-.2 8.3-1.2 12.5-2.1 1.9-.4 3.8-.9 5.7-1.3 2.3-.4 4.6-.8 6.8-1.1 2.5-.4 5.1-.7 7.6-.7 2.3 0 4.8.1 7 .9 2.6.9 5 2.6 7.4 4.2.2-.2.3-.5.3-.8-.1 0-.2-.4-.3-.8z" />
                        <path fill="#222326" d="M140.7 168.9c1.4-2.9 2.9-5.6 5.1-7.5 3.5-3 7.8-4.3 11.9-4.9 4.2-.7 8.4-.7 12.7-.5 5.4.3 10.9.9 16.2 2 4.4.9 8.7 2.1 12.9 3.7-.6 2.3-1.4 4.5-2.3 6.5-.2.2-.4.5-.6.7-.4.4-.9.9-1.4 1.2-2.5.7-5 .8-7.5.7-4.2-.2-8.3-1.2-12.5-2.1-1.9-.4-3.8-.9-5.7-1.3-2.3-.4-4.6-.8-6.8-1.1-2.5-.4-5.1-.7-7.6-.7-2.3 0-4.8.1-7 .9-2.6.9-5 2.6-7.4 4.2-.2-.2-.3-.5-.3-.8.1 0 .2-.4.3-.8z" />
                        <path fill="#672D91" d="M126.5 79.1c4.3 0 8.6-.6 12.9-1.3 5-.8 10-1.9 14.9-3.6 5.4-1.8 10.5-4.3 15-7.8.2-.2 0-.4-.2-.2-8 5.9-18 8.8-27.7 10.5-8.3 1.4-17 2.4-25.3.6-4.2-.9-8.7-2.4-11.6-5.7-.3-.4-1.1.2-.8.6 1.1 1.4 1.9 2.9 2.8 4.5.8 1.5 1.7 2.9 2.8 4.2 2.1 2.5 4.7 4.4 7.6 5.9 6.3 3.3 13.2 4.7 20.3 4.7 1.4 0 2.8 0 4.1-.1-3.4 1-6.9 1.5-10.4 2-3.4.4-6.8.8-10.3.8-3.3 0-6.5-.5-9.6-1.5-3.3-1-6.4-2.4-9.7-3.6-.3-.1-.7.2-.8.5-.5 4.6.7 9.4 2.5 13.6 1.7 4.1 4.1 8.1 7.1 11.4 5.4 6 13.1 9.3 21.2 9.6 2 .1 4 0 6-.3-.8.4-1.7.7-2.5 1.1-3.7 1.5-7.5 3-11.4 3.9-2.5.5-5 .8-7.5.8-.3 0-.8.3-.6.7 1.1 2.7 3.9 4.1 6.5 4.9 2.8.9 5.7 1.3 8.6 1.3 4.3 0 8.5-1 12.5-2.4 4.1-1.4 7.9-3.3 11.3-6 3.5-2.8 6.6-6.2 10.2-9 .3-.2.1-.6-.3-.4-3.2 2.2-5.9 5-8.8 7.5-1.5 1.3-3 2.5-4.7 3.5-1.8 1.1-3.7 2-5.7 2.8-4.1 1.6-8.5 2.9-13 3.1-2.8.1-5.6-.2-8.3-.8-2.7-.7-5.8-1.8-7.2-4.4 4.3-.2 8.5-1.2 12.5-2.6 1.9-.7 3.7-1.4 5.5-2.2 1.5-.6 2.9-1.3 4.3-2.1 2-.4 3.9-.9 5.8-1.7.4-.2.3-.7-.1-.6-1.3.4-2.6.8-3.9 1.1 1.2-.9 2.2-1.9 2.9-3.1.1-.3-.2-.3-.4-.1-.9 1.5-2.3 2.6-3.8 3.5-6 1.1-12.2.8-17.9-1.4-3.6-1.4-7-3.6-9.8-6.4-3-3-5.4-6.8-7.2-10.6-2.1-4.4-3.5-9.2-3.1-14.1 2.7 1 5.4 2.2 8.2 3.1 3.2 1 6.4 1.7 9.7 1.8 3.4.1 6.9-.2 10.3-.7 3.3-.4 6.5-.9 9.7-1.8 1.4-.4 2.7-.8 4-1.4 1.9-.1 3.8-.3 5.7-.5.3 0 .6-.6.1-.6-1.2.1-2.5.1-3.7.2 1.1-.6 2.3-1.2 3.3-1.9.2-.1 0-.3-.1-.2-1.5.9-3 1.6-4.6 2.2-5.2.3-10.4.4-15.6-.5-3.5-.6-6.9-1.7-10.1-3.3-2.9-1.4-5.7-3.2-7.9-5.5-1.2-1.3-2.3-2.8-3.1-4.4-.4-.7-.7-1.4-1.1-2.1 2.3 1.5 4.9 2.5 7.5 3.2 2.7.3 6.9.7 11.2.6z" />

                        {/* === LEFT EYE === */}
                        <g className={styles.eye} id="left-eye">
                            {/* Sclera (Static) */}
                            <path fill="#fff" d="M151.7 190c2.2-3.1 5-5.9 8.4-7.9 3.9-2.2 8.3-3.4 12.7-3.8.4 0 .7 0 1.1 0 2.2.2 4.4.6 6.4 1.2 2.7.8 5.1 2 7.1 3.6 2.7 2.5 4.7 5.5 5.9 8.8 1.2 3.2 1.8 6.7 2.1 10.1-2.5 1.5-5.4 2.5-8.2 3.2-3.7 1-7.5 1.6-11.4 1.9-1.7.1-3.4.2-5 .2-2.2-.2-4.3-.5-6.4-1-1.1-.3-2.2-.6-3.3-.9-4.5-2.4-8.6-5.3-12.3-8.7-.1-.6-.1-1.4-.1-2.1 1 3.1 2 1.5 3 0z" />

                            {/* Iris Group (Moves) */}
                            <g ref={leftPupilRef}>
                                {/* Iris */}
                                <path fill="#AA562B" d="M187.1 194.7c-1.6 7.3-9.1 12-16.5 10.3-7.5-1.6-12.2-8.9-10.6-16.2 1.6-7.3 9.1-12 16.5-10.3 7.6 1.6 12.3 8.9 10.6 16.2z" />
                                {/* Pupil */}
                                <path fill="#4A1A05" d="M183.6 193.9c-1.2 5.5-6.7 8.9-12.3 7.7-5.6-1.2-9.1-6.6-7.9-12 1.2-5.5 6.7-8.9 12.3-7.7 5.6 1.2 9.1 6.6 7.9 12z" />
                                {/* Highlights */}
                                <path fill="#fff" d="M173.4 186c-.5 2.2-2.7 3.5-4.9 3-2.2-.5-3.6-2.6-3.1-4.8.5-2.2 2.7-3.5 4.9-3 2.2.5 3.6 2.6 3.1 4.8z" />
                                <path fill="#fff" d="M165 190.3c-.1.6-.8 1-1.4.9-.7-.1-1.1-.8-.9-1.4.1-.6.8-1 1.4-.9.7.1 1.1.8.9 1.4z" />
                            </g>

                            {/* Eyelid / Lash (Static) */}
                            <path fill="#360E00" d="M151.4 187c.7-.9 1.5-1.7 2.3-2.5 3.3-3.2 7.4-5.6 12-6.8 4.6-1.2 9.6-1.2 14.2.1 4.8 1.4 9.2 4.3 12 8.4-.3.5-.6 1-.9 1.5-1.9 3.6-2.8 7.6-2.3 11.6.2-.7.4-1.4.6-2 .2-.8.4-1.7.6-2.5.7-2.4 1.5-4.6 2.8-6.8 2.4-3.8 6.1-6.6 10.4-8.1 8.3-2.9 17.8-.5 24.4 5.1 1.9 1.7 3.7 3.6 5.1 5.7.7 1 1.4 2.1 2 3.1-1.1 4.4-.4 2.1-1.4-.1z" />
                        </g>

                        {/* === RIGHT EYE === */}
                        <g className={styles.eye} id="right-eye">
                            <path fill="#fff" d="M278.8 189.5c-2.2-3.1-5-5.9-8.4-7.9-3.9-2.2-8.3-3.4-12.7-3.8-.4 0-.7 0-1.1 0-2.2.2-4.4.6-6.4 1.2-2.7.8-5.1 2-7.1 3.6-2.7 2.5-4.7 5.5-5.9 8.8-1.2 3.2-1.8 6.7-2.1 10.1 2.5 1.4 5.3 2.5 8.1 3.2 3.7 1 7.5 1.6 11.4 1.9 1.7.1 3.3.2 5 .2 2.2-.2 4.3-.5 6.4-1 1.1-.3 2.2-.6 3.3-.9 4.5-2.3 8.6-5.3 12.3-8.7.1-.7.1-1.4.1-2 1 3.1 2 1.5 3 0z" />

                            <g ref={rightPupilRef}>
                                <path fill="#AA562B" d="M271.2 194.2c-1.7 7.4-9.1 12-16.6 10.4-7.5-1.6-12.3-8.9-10.6-16.3 1.7-7.4 9.1-12 16.6-10.4 7.6 1.7 12.3 8.9 10.6 16.3z" />
                                <path fill="#4A1A05" d="M267.7 193.4c-1.2 5.5-6.8 8.9-12.4 7.7-5.6-1.2-9.1-6.6-7.9-12.1 1.2-5.5 6.8-8.9 12.4-7.7 5.6 1.3 9.1 6.6 7.9 12.1z" />
                                <path fill="#fff" d="M257.5 185.5c-.5 2.2-2.7 3.5-4.9 3.1-2.2-.5-3.6-2.6-3.1-4.8.5-2.2 2.7-3.5 4.9-3.1 2.1.5 3.5 2.6 3.1 4.8z" />
                                <path fill="#fff" d="M249 189.8c-.1.6-.8 1-1.4.9-.7-.1-1.1-.8-.9-1.4.1-.6.8-1 1.4-.9.6.1 1.1.8.9 1.4z" />
                            </g>

                            <path fill="#360E00" d="M279.1 186.6c-.7-.9-1.5-1.7-2.3-2.5-3.3-3.2-7.4-5.6-12-6.8-4.6-1.2-9.6-1.2-14.2.1-4.8 1.4-9.2 4.3-12 8.4-.3.5-.6 1-.9 1.5-1.9 3.6-2.8 7.6-2.3 11.6.2-.7.4-1.4.6-2 .2-.8.4-1.7.6-2.5.7-2.4 1.5-4.6 2.8-6.8 2.4-3.8 6.1-6.6 10.4-8.1 8.3-2.9 17.8-.5 24.4 5.1 1.9 1.7 3.7 3.6 5.1 5.7.7 1 1.4 2.1 2 3.1-1.1 4.4-.4 2.1-1.4-.1z" />
                        </g>

                        {/* === MOUTH GROUP (Animatable) === */}
                        <g ref={mouthRef} id="mouth-group">
                            {/* Upper Lip Shadow / Detail */}
                            <path opacity="0.65" fill="#92422B" d="M222.7 234c-2.5 1.8-5.3 3.5-8.4 4-1.5.3-2.9.2-4.4-.2-1.5-.4-2.9-1-4.3-1.7-1.4-.7-2.7-1.6-3.8-2.7-.6-.5-1.1-1-1.6-1.6-.5-.5-1-1.1-1.3-1.7-.1-.1-.1-.3-.2-.4-.1-.1-.2-.2-.2-.3-.1-.3-.1-.8 0-1.1 0-.7.2-1.4.4-2.1.4-1.5.8-3 1.3-4.4 1.2-4.1 2.5-8.2 3.5-12.3 0-.1-.2-.1-.2 0-1.4 3.9-2.8 7.8-4.1 11.7-.5 1.6-1.1 3.3-1.6 4.9-.2.7-.4 1.5-.6 2.3-.1.3-.1.7-.1 1 0 .2 0 .4 0 .5 0 .2-.1.4-.1.6 0 .8.5 1.5.9 2 .5.7 1 1.3 1.6 1.8 1.2 1.2 2.6 2.2 4.1 3 3 1.6 6.4 2.4 9.8 1.9 3.6-.5 7.3-2.4 9.8-5.1-.6.1-.9.2-1.2.4z" />

                            {/* Main Mouth Shape (Smile) */}
                            <path fill="#FFFFFF" d="M194.7 266.6c1.1.4 2.2.6 3.4.8 3.4.4 6.9.1 10.4-.1 4.5-.3 8.9-.4 13.4-1 2.2-.3 4.4-.7 6.5-1.4 2-.6 3.9-1.3 5.7-2.4 1.3-.8 2.3-1.8 3.1-3 0-.1.1-.2.1-.2-8.8-.2-17.5-.8-26.3-.7-6.2.1-12.3.4-18.5 1.6-1.1.2-2.2.5-3.3.7.6 1.2 1.3 2.4 2.3 3.4 1.1 1.1 2.2 1.8 3.2 2.3z" />
                            <path fill="#B15137" d="M230.1 271.2c-3.3-.5-6.6-.8-9.9-1-1.8-.1-3.7-.2-5.5-.1-3 .1-6.1.4-9.1.8-3.7.5-7.4 1-11 2.1-.5.2-1 .3-1.5.5 7.7 7.1 19.7 4.5 29.3 2.3 2.9-.7 5.9-1.5 8.6-2.9.7-.4 1.3-.8 1.9-1.2-1 0-1.9-.3-2.8-.5z" />

                            {/* Lower Lip Detail */}
                            <path opacity="0.65" fill="#92422B" d="M224.3 289c-3.5 1.8-7.6 2.3-11.5 2.2-2 0-4-.2-5.9-.6-2.2-.5-4.4-1.4-6.6-1.9-.3-.1-.9.4-.5.6 4 2.7 8.1 3.9 12.9 4 4.2.1 8.7-.4 12.3-2.8.2.1-.2-.2-.7-1.5z" />
                        </g>
                    </g>
                </g>
            </svg>
        </div>
    );
});
